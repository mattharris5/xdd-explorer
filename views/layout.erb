<!DOCTYPE html>
<html>
<head>
    <title>XSD Explorer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
			
    <!-- Latest compiled and minified Bootsrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script src="/vendor/splitter.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/jquery.highlight-5.js" type="text/javascript" charset="utf-8"></script>
    
    <link href="/stylesheets/schemas.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">

        <!-- Static navbar -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img src="/images/sif-logo.png" alt="SIF Logo">
                    XSD Explorer
                </a>
            </div>
            <div class="navbar-collapse collapse">                
                <form class="navbar-form navbar-left" role="search" id="searchForm">
                    <div class="form-group">
                        <input id="search" type="search" placeholder="Search" class="form-control">
                    </div>
                    <button type="submit" class="btn btn-default">Search</button>
                </form>
            </div><!--/.nav-collapse -->
        </nav>

        <div>
            <%if @error then %>
                <div class="alert alert-error"><%=@error%></div>
            <% end %>
            <%= yield %>
        </div>
    </div>
	
    <script>
    $(function() {
        $("div.split-pane").splitter();
        
        $(".node .handle").click(function(event) {
            $(".node").removeClass("hover active current critical-path")
            $(this).parent().parent().addClass("current active")
                        
            $(this).parents(".node").each(function(elem) {
                $(this).addClass('active critical-path')
                $(this).prevAll().addClass('active')
            });
            
            
            $("#info_panel .contents").empty()
            var attrContents = $(this).parent().siblings().children(".attributes").clone(true)
            attrContents.removeClass("hidden")
            $("#info_panel .contents").append(attrContents)
            
            if($("#showXML").prop('checked'))
                $("#info_panel .code").collapse('show')
        });
        
        $("#showXML").click(function(event) {
            $("#info_panel .code").collapse('toggle')
        })
        
        $("#searchForm").on('submit', function(event) {
            event.preventDefault()
            $(".schema").removeHighlight()
            $(".node-body").collapse('hide')
            $(".node-heading").highlight($("#search").val())
            $("mark.highlight").parents(".node-body").collapse('show')
            $("#search").select()
        })
    });
    </script>
</body>
</html>
